<Page x:Class="WorkOrderManagementSystem.Views.Pages.AnalyticsPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      Title="Analytics">
    <Grid Background="#F5F5F5" Margin="20">
        <ScrollViewer>
            <StackPanel>
                <!-- Header -->
                <TextBlock Text="Analytics and Reports" FontSize="28" FontWeight="Bold" Margin="0,0,0,20"/>

                <!-- Key Metrics - 4 Column Grid -->
                <Grid Margin="0,0,0,30">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <!-- Total Revenue -->
                    <Border Background="White" CornerRadius="8" Padding="20" Margin="0,0,10,0" BorderBrush="#E0E0E0" BorderThickness="1">
                        <StackPanel>
                            <Grid Margin="0,0,0,15">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Text="Total Revenue" FontSize="12" Foreground="#666" VerticalAlignment="Center"/>
                                <Ellipse Grid.Column="1" Width="30" Height="30" Fill="#E8F5E9"/>
                                <TextBlock Grid.Column="1" Text="$" FontSize="16" FontWeight="Bold" Foreground="#4CAF50" 
                                           HorizontalAlignment="Center" VerticalAlignment="Center"/>
                            </Grid>
                            <TextBlock Name="TotalRevenueText" Text="$0" FontSize="28" FontWeight="Bold" Margin="0,0,0,8"/>
                        </StackPanel>
                    </Border>

                    <!-- Jobs Completed -->
                    <Border Grid.Column="1" Background="White" CornerRadius="8" Padding="20" Margin="10,0" BorderBrush="#E0E0E0" BorderThickness="1">
                        <StackPanel>
                            <Grid Margin="0,0,0,15">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Text="Jobs Completed" FontSize="12" Foreground="#666" VerticalAlignment="Center"/>
                                <Ellipse Grid.Column="1" Width="30" Height="30" Fill="#E3F2FD"/>
                                <TextBlock Grid.Column="1" Text="📊" FontSize="16" 
                                           HorizontalAlignment="Center" VerticalAlignment="Center"/>
                            </Grid>
                            <TextBlock Name="JobsCompletedText" Text="0" FontSize="28" FontWeight="Bold" Margin="0,0,0,8"/>
                        </StackPanel>
                    </Border>

                    <!-- Avg Turnaround -->
                    <Border Grid.Column="2" Background="White" CornerRadius="8" Padding="20" Margin="10,0" BorderBrush="#E0E0E0" BorderThickness="1">
                        <StackPanel>
                            <Grid Margin="0,0,0,15">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Text="Avg. Turnaround" FontSize="12" Foreground="#666" VerticalAlignment="Center"/>
                                <Ellipse Grid.Column="1" Width="30" Height="30" Fill="#FFF3E0"/>
                                <TextBlock Grid.Column="1" Text="⏱" FontSize="16" 
                                           HorizontalAlignment="Center" VerticalAlignment="Center"/>
                            </Grid>
                            <TextBlock Name="AvgTurnaroundText" Text="0 days" FontSize="28" FontWeight="Bold" Margin="0,0,0,8"/>
                        </StackPanel>
                    </Border>

                    <!-- Active Customers -->
                    <Border Grid.Column="3" Background="White" CornerRadius="8" Padding="20" Margin="10,0,0,0" BorderBrush="#E0E0E0" BorderThickness="1">
                        <StackPanel>
                            <Grid Margin="0,0,0,15">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Text="Active Customers" FontSize="12" Foreground="#666" VerticalAlignment="Center"/>
                                <Ellipse Grid.Column="1" Width="30" Height="30" Fill="#F3E5F5"/>
                                <TextBlock Grid.Column="1" Text="👥" FontSize="16" 
                                           HorizontalAlignment="Center" VerticalAlignment="Center"/>
                            </Grid>
                            <TextBlock Name="ActiveCustomersText" Text="0" FontSize="28" FontWeight="Bold" Margin="0,0,0,8"/>
                        </StackPanel>
                    </Border>
                </Grid>

                <!-- Two Column Layout for DataGrids -->
                <Grid Margin="0,20,0,0">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <!-- Technician Performance -->
                    <StackPanel Margin="0,0,10,0">
                        <TextBlock Text="Technician Performance" FontSize="16" FontWeight="Bold" Margin="0,0,0,12"/>
                        <Border Background="White" CornerRadius="8" Padding="15" BorderBrush="#E0E0E0" BorderThickness="1">
                            <DataGrid Name="TechnicianGrid" 
                                      IsReadOnly="True" 
                                      AutoGenerateColumns="False"
                                      CanUserAddRows="False"
                                      BorderThickness="0">
                                <DataGrid.Columns>
                                    <DataGridTextColumn Header="Technician" Binding="{Binding Name}" Width="*" MinWidth="100"/>
                                    <DataGridTextColumn Header="Completed" Binding="{Binding CompletedJobs}" Width="80"/>
                                    <DataGridTextColumn Header="Pending" Binding="{Binding PendingJobs}" Width="80"/>
                                    <DataGridTextColumn Header="In Progress" Binding="{Binding InProgressJobs}" Width="90"/>
                                    <DataGridTextColumn Header="Avg. Time" Binding="{Binding AvgTurnaround}" Width="100"/>
                                    <DataGridTextColumn Header="Revenue" Binding="{Binding Revenue}" Width="80"/>
                                </DataGrid.Columns>
                            </DataGrid>
                        </Border>
                    </StackPanel>

                    <!-- Job Type Breakdown -->
                    <StackPanel Grid.Column="1" Margin="10,0,0,0">
                        <TextBlock Text="Job Type Breakdown" FontSize="16" FontWeight="Bold" Margin="0,0,0,12"/>
                        <Border Background="White" CornerRadius="8" Padding="15" BorderBrush="#E0E0E0" BorderThickness="1">
                            <DataGrid Name="JobTypeGrid" 
                                      IsReadOnly="True" 
                                      AutoGenerateColumns="False"
                                      CanUserAddRows="False"
                                      BorderThickness="0">
                                <DataGrid.Columns>
                                    <DataGridTextColumn Header="Device" Binding="{Binding Device}" Width="100"/>
                                    <DataGridTextColumn Header="Repair Type" Binding="{Binding JobType}" Width="*" MinWidth="120"/>
                                    <DataGridTextColumn Header="Count" Binding="{Binding Count}" Width="60"/>
                                    <DataGridTextColumn Header="Share" Binding="{Binding Share}" Width="60"/>
                                    <DataGridTextColumn Header="Revenue" Binding="{Binding Revenue}" Width="80"/>
                                </DataGrid.Columns>
                            </DataGrid>
                        </Border>
                    </StackPanel>
                </Grid>
            </StackPanel>
        </ScrollViewer>
    </Grid>
</Page>
